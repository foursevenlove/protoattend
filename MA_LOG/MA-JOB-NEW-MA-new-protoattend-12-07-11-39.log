[ModelArts Service Log][init] toolkit_obs_upload_job_pid = 53
[ModelArts Service Log][init] toolkit_obs_upload_pid = 54
[ModelArts Service Log][init] running at 2021-12-07-11:39:22
[ModelArts Service Log][init] ip of the pod: 172.16.0.135
[ModelArts Service Log][init] autosearch_path is empty, skip the autosearch download
[ModelArts Service Log][init] download code_url: s3://npupro/output/MA-new-protoattend-12-07-11-39/code/
[ModelArts Service Log][init] modelarts_downloader_job_pid = 122
[ModelArts Service Log]2021-12-07 11:39:23,115 - modelarts-downloader.py[line:264] - INFO: Main: modelarts-downloader starting with Namespace(dst='./', recursive=True, skip_creating_dir=False, src='s3://npupro/output/MA-new-protoattend-12-07-11-39/code/', trace=False, type='common', verbose=False)
[ModelArts Service Log][init] code is now in /home/ma-user/modelarts/user-job-dir
[ModelArts Service Log][init]engine type is: ascend-powered-engine
[ModelArts Service Log][init]python version: 2
[ModelArts Service Log][init] inputs_handler_job_pid = 223
[ModelArts Service Log][INFO][2021/12/07 11:39:35]: caching the content of [data_url] inputs
[ModelArts Service Log]2021-12-07 11:39:35,567 - modelarts-downloader.py[line:264] - INFO: Main: modelarts-downloader starting with Namespace(dst='./', recursive=True, skip_creating_dir=True, src='s3://npupro/dataset/', trace=False, type='common', verbose=False)
[ModelArts Service Log][INFO][2021/12/07 11:39:36]: cache the content of [data_url] inputs successfully
[ModelArts Service Log][INFO][2021/12/07 11:39:36]: it can be accessed at local dir [/home/ma-user/modelarts/inputs/data_url_0]
[ModelArts Service Log][INFO][2021/12/07 11:39:36,749]: mkdir for local output dir
[ModelArts Service Log][INFO][2021/12/07 11:39:36,749]: output-handler finalized
[ModelArts Service Log][init] exiting at 2021-12-07-11:39:36
[ModelArts Service Log][init] upload_metrics_pid = 435
[ModelArts Service Log][init] stop toolkit_obs_upload_pid = 54 by signal SIGTERM
[ModelArts Service Log][sidecar] toolkit_obs_upload 54 ret_code is 0
[ModelArts Service Log][init] exit with 0
[ModelArts Service Log]user: uid=1102(ma-user) gid=1102(ma-group) groups=1102(ma-group),1000(HwHiAiUser)
[ModelArts Service Log]pwd: /home/ma-user/infer
[ModelArts Service Log]boot_file: /home/ma-user/modelarts/user-job-dir/code/boot_modelarts.py
[ModelArts Service Log]command: /home/ma-user/modelarts/user-job-dir/code/boot_modelarts.py --data_url=/home/ma-user/modelarts/inputs/data_url_0/ --train_url=/home/ma-user/modelarts/outputs/train_url_0/
[ModelArts Service Log]local_code_dir: /home/ma-user/modelarts/user-job-dir/code
[ModelArts Service Log]training start at 2021-12-07-11:39:39
[ModelArts Service Log][sidecar] toolkit_obs_upload_job_pid = 32
[ModelArts Service Log][sidecar] toolkit_obs_upload_pid = 33
[ModelArts Service Log][sidecar] running at 2021-12-07-11:39:40
[ModelArts Service Log][sidecar] outputs_handler_job_pid = 60
[ModelArts Service Log][sidecar] outputs_handler_pid = 61
[ModelArts Service Log][sidecar] toolkit_obs_sync_by_channels_job_pid = 75
[ModelArts Service Log][sidecar] toolkit_obs_sync_by_channels_pid = 76
[ModelArts Service Log][sidecar] waiting for training complete
time="2021-12-07T11:39:40+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/" file="upload.go:39" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="obs dir = s3://modelarts-training-log-cn-north-4/221c703e-7297-4bd0-ab64-86639a91bdcf/worker-0" file="upload.go:42" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="start the periodic upload task, upload period = 5 seconds " file="upload.go:52" Command=obs/upload Component=ma-training-toolkit Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="local dir = /home/ma-user/modelarts/outputs/train_url_0/" file="upload.go:39" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=train_url Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="obs dir = s3://npupro/output/MA-new-protoattend-12-07-11-39/output/" file="upload.go:42" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=train_url Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="start the periodic upload task, upload period = 30 seconds " file="upload.go:52" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=train_url Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="local dir = /home/ma-user/modelarts/log/" file="upload.go:39" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=log_url Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="obs dir = s3://npupro/output/MA-new-protoattend-12-07-11-39/log/" file="upload.go:42" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=log_url Platform=ModelArts-Service
time="2021-12-07T11:39:40+08:00" level=info msg="start the periodic upload task, upload period = 30 seconds " file="upload.go:52" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=log_url Platform=ModelArts-Service
[ModelArts Service Log][INFO][2021/12/07 11:39:40,815]: registered signal handler
/home/ma-user/modelarts/user-job-dir
INFO:root:Using MoXing-v2.0.0.rc2.4b57a67b-4b57a67b
INFO:root:Using OBS-Python-SDK-3.20.9.1
[ModelArts Service Log]2021-12-07 11:39:43,733 - INFO - Ascend Driver: Version=21.0.2
[ModelArts Service Log]2021-12-07 11:39:43,733 - INFO - you are advised to use ASCEND_DEVICE_ID env instead of DEVICE_ID, as the DEVICE_ID env will be discarded in later versions
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - particularly, ${ASCEND_DEVICE_ID} == ${DEVICE_ID}, it's the logical device id
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - Davinci training command
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - ['/home/ma-user/anaconda/bin/python', '/home/ma-user/modelarts/user-job-dir/code/boot_modelarts.py', '--data_url=/home/ma-user/modelarts/inputs/data_url_0/', '--train_url=/home/ma-user/modelarts/outputs/train_url_0/']
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - Wait for Rank table file ready
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - Rank table file (K8S generated) is ready for read
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - 
{
    "status": "completed",
    "group_count": "1",
    "group_list": [
        {
            "group_name": "worker",
            "device_count": "1",
            "instance_count": "1",
            "instance_list": [
                {
                    "pod_name": "ma-job-221c703e-7297-4bd0-ab64-86639a91bdcf-worker-0",
                    "server_id": "192.168.0.91",
                    "devices": [
                        {
                            "device_id": "2",
                            "device_ip": "192.3.196.170"
                        }
                    ]
                }
            ]
        }
    ]
}
[ModelArts Service Log]2021-12-07 11:39:43,734 - INFO - Rank table file (V1)
[ModelArts Service Log]2021-12-07 11:39:43,735 - INFO - 
{
    "status": "completed",
    "version": "1.0",
    "server_count": "1",
    "server_list": [
        {
            "server_id": "192.168.0.91",
            "device": [
                {
                    "device_id": "2",
                    "device_ip": "192.3.196.170",
                    "rank_id": "0"
                }
            ]
        }
    ]
}
[ModelArts Service Log]2021-12-07 11:39:43,735 - INFO - Rank table file (V1) is generated
[ModelArts Service Log]2021-12-07 11:39:43,735 - INFO - Current server
[ModelArts Service Log]2021-12-07 11:39:43,735 - INFO - 
{
    "server_id": "192.168.0.91",
    "device": [
        {
            "device_id": "2",
            "device_ip": "192.3.196.170",
            "rank_id": "0"
        }
    ]
}
[ModelArts Service Log]2021-12-07 11:39:43,736 - ERROR - Route plan so files not found. Please check files in /usr/local/route
[ModelArts Service Log]2021-12-07 11:39:43,737 - INFO - bootstrap proc-rank-0-device-0
[ModelArts Service Log]2021-12-07 11:39:43,742 - INFO - proc-rank-0-device-0 (pid: 98)
WARNING:tensorflow:From /usr/local/Ascend/tfplugin/latest/tfplugin/python/site-packages/npu_bridge/estimator/npu/npu_optimizer.py:283: The name tf.train.Optimizer is deprecated. Please use tf.compat.v1.train.Optimizer instead.

PYTHONUNBUFFERED=1
LD_LIBRARY_PATH=/usr/local/seccomponent/lib:/home/ma-user/anaconda/lib:/usr/local/nvidia/lib:/usr/local/nvidia/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/lib:/usr/local/openmpi/lib:/usr/lib/aarch64-linux-gnu/hdf5/serial:/usr/local/Ascend/nnae/latest/fwkacllib/lib64:/usr/local/Ascend/driver/lib64/common:/usr/local/Ascend/driver/lib64/driver::/usr/local/seccomponent/lib/:/usr/local/seccomponent/lib/openssl/
TOOLCHAIN_HOME=HOST_ASCEND_BASE/toolkit
MA_ENGINE_VERSION=tensorflow_1.15-cann_5.0.2-py_3.7-euler_2.8.3-aarch64
MA_NUM_HOSTS=1
VC_WORKER_HOSTS=ma-job-221c703e-7297-4bd0-ab64-86639a91bdcf-worker-0.ma-job-221c703e-7297-4bd0-ab64-86639a91bdcf
VK_TASK_INDEX=0
MA_AUTOSEARCH_ENABLE=false
TF_PLUGIN_PKG=/usr/local/Ascend/tfplugin/latest/tfplugin/python/site-packages
_=/usr/bin/env
MA_SCRIPT_INTERPRETER=
HOSTNAME=ma-job-221c703e-7297-4bd0-ab64-86639a91bdcf-worker-0
OLDPWD=/home/ma-user/infer
PIP_OPTS=--trusted-host szg1.artifactory.inhuawei.com -i http://szg1.artifactory.inhuawei.com/artifactory/api/pypi/cbu-pypi-public/simple/ --user
NPU-VISIBLE-DEVICES=2
ENV_NAME=TensorFlow-1.15-arm
JAVA_HOME=/home/ma-user/jdk1.8.0_212
MA_CURRENT_IP=172.16.0.135
MA_MOUNT_PATH=/home/ma-user/modelarts
CLASS_PATH=.:/home/ma-user/jdk1.8.0_212/lib/dt.jar:/home/ma-user/jdk1.8.0_212/lib/tools.jar:/home/ma-user/jdk1.8.0_212/jre/lib
ASCEND_AICPU_PATH=/usr/local/Ascend/nnae/latest
MA_ENGINE_TYPE=ascend-powered-engine
MA_HOME=/home/ma-user
KUBERNETES_PORT_443_TCP_PROTO=tcp
KUBERNETES_PORT_443_TCP_ADDR=10.247.0.1
MA_VJ_NAME=ma-job-221c703e-7297-4bd0-ab64-86639a91bdcf
TBE_IMPL_PATH=/usr/local/Ascend/nnae/latest/opp/op_impl/built-in/ai_core/tbe
FE_FLAG=1
MOX_VERSION_LOGGED=1
MA_PIP_URL=http://repo.myhuaweicloud.com/repository/pypi/simple/
FWK_PYTHON_PATH=/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages
KUBERNETES_PORT=tcp://10.247.0.1:443
PWD=/home/ma-user/modelarts/workspace/device0
ASCEND_DEVICE_ID=0
RANK_ID=0
HOME=/home/ma-user
LC_CTYPE=C.UTF-8
_STDBUF_E=L
DEVICE_ID=0
_STDBUF_O=L
S3_USE_HTTPS=1
MA_LOG_DIR=/home/ma-user/modelarts/log
RANK_SIZE=1
KUBERNETES_SERVICE_PORT_HTTPS=443
SITE_PACKAGES_PATH=/home/ma-user/miniconda3/envs/TensorFlow-1.15-arm/lib/python3.7/site-packages
KUBERNETES_PORT_443_TCP_PORT=443
IS_NEW_IMAGE_FRAMEWORK=true
RANK_TABLE_FILE=/home/ma-user/rank_table/jobstart_hccl.json
MA_NUM_GPUS=1
S3_ENDPOINT=obs.cn-north-4.myhuaweicloud.com
SCC_CONFIG_PATH=/home/ma-user/modelarts/scc/conf/scc.conf
GLOG_v=2
MA_CURRENT_INSTANCE_ID=5701a17d-4c5e-4de1-8c36-9f445f60b5d2
FMK_WORKSPACE=/home/ma-user/modelarts/user-job-dir/workspace
MA_SCC_PYTHON_ADAPTER=/home/ma-user/modelarts/scc
MA_PIP_HOST=repo.myhuaweicloud.com
MODELARTS_MODEL_PATH=/home/ma-user/infer/model/1
S3_VERIFY_SSL=0
PAAS_POD_ID=5701a17d-4c5e-4de1-8c36-9f445f60b5d2
KUBERNETES_PORT_443_TCP=tcp://10.247.0.1:443
OPTION_EXEC_EXTERN_PLUGIN_PATH=/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/libfe.so:/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/libaicpu_plugin.so:/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/librts_engine.so:/usr/local/Ascend/fwkacllib/lib64/plugin/opskernel/libge_local_engine.so
ASCEND_PROCESS_LOG_PATH=/home/ma-user/modelarts/log/modelarts-job-221c703e-7297-4bd0-ab64-86639a91bdcf/ascend/process_log/rank_0
MA_INPUTS={"inputs": [{"parameter": {"label": "data_url", "value": "/home/ma-user/modelarts/inputs/data_url_0"}, "data_source": {"obs": {"obs_url": "/npupro/dataset/"}}}]}
VC_TASK_INDEX=0
PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python
MODELARTS_BATCH_PREDICT_URL=http://127.0.0.1:8080
ASCEND_OPP_PATH=/usr/local/Ascend/nnae/latest/opp
HCCL_CONNECT_TIMEOUT=1800
VC_WORKER_NUM=1
JOB_ID=modelarts-job-221c703e-7297-4bd0-ab64-86639a91bdcf
MA_PYTHON_VERSION=2
DEPLOY_MODE=1
SHLVL=4
ANACONDA_DIR=/home/ma-user/miniconda3
PYTHONPATH=/home/ma-user/modelarts/user-job-dir:/usr/local/Ascend/nnae/latest/pyACL/python/site-packages/acl:/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages:/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages/auto_tune.egg:/usr/local/Ascend/nnae/latest/fwkacllib/python/site-packages/schedule_search.egg:/usr/local/Ascend/tfplugin/latest/tfplugin/python/site-packages:/usr/local/Ascend/nnae/latest/opp/op_impl/built-in/ai_core/tbe:/usr/local/seccomponent/lib:/home/ma-user/infer/model/1
MA_OUTPUTS={"outputs": [{"parameter": {"label": "train_url", "value": "/home/ma-user/modelarts/outputs/train_url_0"}, "data_source": {"obs": {"obs_url": "/npupro/output/MA-new-protoattend-12-07-11-39/output/"}}}]}
MA_DETECT_ITEM={}
MA_CURRENT_INSTANCE_NAME=ma-job-221c703e-7297-4bd0-ab64-86639a91bdcf-worker-0
KUBERNETES_SERVICE_PORT=443
ME_TBE_PLUGIN_PATH=/usr/local/Ascend/opp/framework/built-in/tensorflow/
CREDENTIAL_PROFILES_FILE=/run/secrets/modelarts/user/config
MA_JOB_DIR=/home/ma-user/modelarts/user-job-dir
JRE_HOME=/home/ma-user/jdk1.8.0_212/jre
PATH=/home/ma-user/anaconda/bin:/home/ma-user/jdk1.8.0_212/bin:/home/ma-user/jdk1.8.0_212/jre/bin:/home/ma-user/ddk/bin/x86_64-linux-gcc5.4:/usr/local/openmpi/bin:/home/ma-user/miniconda3/envs/TensorFlow-1.15-arm/bin:/usr/local/ma/python3.7/bin/:/usr/local/Ascend/nnae/latest/fwkacllib/ccec_compiler/bin:/usr/local/Ascend/nnae/latest/fwkacllib/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/ma-user/.local/bin
MA_TERMINATION_MESSAGE_PATH=/home/ma-user/modelarts/log/termination-log
MA_TASK_NAME=worker
MA_NAMESPACE=default
LD_PRELOAD=/usr/libexec/coreutils/libstdbuf.so
DLS_LOCAL_CACHE_PATH=/cache
KUBERNETES_SERVICE_HOST=10.247.0.1
AICPU_FLAG=1
0
===>>>code_dir:/home/ma-user/modelarts/user-job-dir/code, work_dir:/home/ma-user/modelarts/workspace/device0
--------config----------
key:train_url: value:/home/ma-user/modelarts/outputs/train_url_0/
key:data_url: value:/home/ma-user/modelarts/inputs/data_url_0/
key:modelarts_data_dir: value:/cache/flower-dataset
key:modelarts_result_dir: value:/cache/result
--------config----------
===>>>Copy files from obs:/home/ma-user/modelarts/inputs/data_url_0/ to modelarts dir:/cache/flower-dataset
===>>>Copy from obs to modelarts, time use:0(s)
===>>>Files: ['t10k-images-idx3-ubyte.gz', 't10k-labels-idx1-ubyte.gz', 'train-images-idx3-ubyte.gz', 'train-labels-idx1-ubyte.gz']
bash command: bash /home/ma-user/modelarts/user-job-dir/code/run_1p.sh /home/ma-user/modelarts/user-job-dir/code /cache/flower-dataset /cache/result /home/ma-user/modelarts/outputs/train_url_0/
WARNING:tensorflow:From /usr/local/Ascend/tfplugin/latest/tfplugin/python/site-packages/npu_bridge/estimator/npu/npu_optimizer.py:283: The name tf.train.Optimizer is deprecated. Please use tf.compat.v1.train.Optimizer instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:45: The name tf.set_random_seed is deprecated. Please use tf.compat.v1.set_random_seed instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:359: The name tf.app.run is deprecated. Please use tf.compat.v1.app.run instead.

/cache/flower-dataset
WARNING:tensorflow:From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/autograph/converters/directives.py:119: The name tf.image.resize_image_with_crop_or_pad is deprecated. Please use tf.image.resize_with_crop_or_pad instead.

W1207 11:39:53.711880 281473169412464 module_wrapper.py:139] From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/autograph/converters/directives.py:119: The name tf.image.resize_image_with_crop_or_pad is deprecated. Please use tf.image.resize_with_crop_or_pad instead.

WARNING:tensorflow:From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/autograph/converters/directives.py:119: The name tf.random_crop is deprecated. Please use tf.image.random_crop instead.

W1207 11:39:53.712495 281473169412464 module_wrapper.py:139] From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/autograph/converters/directives.py:119: The name tf.random_crop is deprecated. Please use tf.image.random_crop instead.

WARNING:tensorflow:From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/ops/image_ops_impl.py:1518: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
W1207 11:39:53.944730 281473169412464 deprecation.py:323] From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/ops/image_ops_impl.py:1518: div (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Deprecated in favor of operator or tf.math.divide.
/home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:83: UserWarning: Seed 1 from outer graph might be getting used by function Dataset_map_parse_function_train, if the random op has not been provided any seed. Explicitly set the seed in the function if this is not the intended behavior.
  train_dataset = train_dataset.map(input_data.parse_function_train)
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:95: DatasetV1.make_initializable_iterator (from tensorflow.python.data.ops.dataset_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `for ... in dataset:` to iterate over a dataset. If using `tf.estimator`, return the `Dataset` object directly from your input function. As a last resort, you can use `tf.compat.v1.data.make_initializable_iterator(dataset)`.
W1207 11:39:54.375916 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:95: DatasetV1.make_initializable_iterator (from tensorflow.python.data.ops.dataset_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `for ... in dataset:` to iterate over a dataset. If using `tf.estimator`, return the `Dataset` object directly from your input function. As a last resort, you can use `tf.compat.v1.data.make_initializable_iterator(dataset)`.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:93: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

W1207 11:39:54.425636 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/model.py:93: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:77: The name tf.initializers.he_normal is deprecated. Please use tf.compat.v1.initializers.he_normal instead.

W1207 11:39:54.426180 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/model.py:77: The name tf.initializers.he_normal is deprecated. Please use tf.compat.v1.initializers.he_normal instead.

WARNING:tensorflow:
The TensorFlow contrib module will not be included in TensorFlow 2.0.
For more information, please see:
  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md
  * https://github.com/tensorflow/addons
  * https://github.com/tensorflow/io (for I/O related ops)
If you depend on functionality not listed there, please file an issue.

W1207 11:39:54.426604 281473169412464 lazy_loader.py:50] 
The TensorFlow contrib module will not be included in TensorFlow 2.0.
For more information, please see:
  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md
  * https://github.com/tensorflow/addons
  * https://github.com/tensorflow/io (for I/O related ops)
If you depend on functionality not listed there, please file an issue.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:78: conv2d (from tensorflow.python.layers.convolutional) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.keras.layers.Conv2D` instead.
W1207 11:39:54.426790 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/model.py:78: conv2d (from tensorflow.python.layers.convolutional) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.keras.layers.Conv2D` instead.
WARNING:tensorflow:From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/layers/convolutional.py:424: Layer.apply (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.
Instructions for updating:
Please use `layer.__call__` method instead.
W1207 11:39:54.427621 281473169412464 deprecation.py:323] From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/layers/convolutional.py:424: Layer.apply (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.
Instructions for updating:
Please use `layer.__call__` method instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:82: batch_normalization (from tensorflow.python.layers.normalization) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.BatchNormalization instead.  In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.batch_normalization` documentation).
W1207 11:39:54.450939 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/model.py:82: batch_normalization (from tensorflow.python.layers.normalization) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.BatchNormalization instead.  In particular, `tf.control_dependencies(tf.GraphKeys.UPDATE_OPS)` should not be used (consult the `tf.keras.layers.batch_normalization` documentation).
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:133: average_pooling2d (from tensorflow.python.layers.pooling) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.AveragePooling2D instead.
W1207 11:39:56.527551 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/model.py:133: average_pooling2d (from tensorflow.python.layers.pooling) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.AveragePooling2D instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:134: flatten (from tensorflow.python.layers.core) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.flatten instead.
W1207 11:39:56.531705 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/model.py:134: flatten (from tensorflow.python.layers.core) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.flatten instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/model.py:136: dense (from tensorflow.python.layers.core) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.Dense instead.
W1207 11:39:56.535644 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/model.py:136: dense (from tensorflow.python.layers.core) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.Dense instead.
WARNING:tensorflow:From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/contrib/sparsemax/python/ops/sparsemax.py:92: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
W1207 11:39:57.751928 281473169412464 deprecation.py:323] From /home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/contrib/sparsemax/python/ops/sparsemax.py:92: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:118: The name tf.summary.scalar is deprecated. Please use tf.compat.v1.summary.scalar instead.

W1207 11:39:57.755499 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:118: The name tf.summary.scalar is deprecated. Please use tf.compat.v1.summary.scalar instead.

INFO:tensorflow:Summary name Average max. coef. train is illegal; using Average_max._coef._train instead.
I1207 11:39:57.760107 281473169412464 summary_op_util.py:66] Summary name Average max. coef. train is illegal; using Average_max._coef._train instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:123: The name tf.log is deprecated. Please use tf.math.log instead.

W1207 11:39:57.762947 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:123: The name tf.log is deprecated. Please use tf.math.log instead.

INFO:tensorflow:Summary name Sparsity entropy loss is illegal; using Sparsity_entropy_loss instead.
I1207 11:39:57.775067 281473169412464 summary_op_util.py:66] Summary name Sparsity entropy loss is illegal; using Sparsity_entropy_loss instead.
INFO:tensorflow:Summary name Total loss is illegal; using Total_loss instead.
I1207 11:39:57.827639 281473169412464 summary_op_util.py:66] Summary name Total loss is illegal; using Total_loss instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:155: The name tf.train.get_or_create_global_step is deprecated. Please use tf.compat.v1.train.get_or_create_global_step instead.

W1207 11:39:57.829681 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:155: The name tf.train.get_or_create_global_step is deprecated. Please use tf.compat.v1.train.get_or_create_global_step instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:156: The name tf.train.exponential_decay is deprecated. Please use tf.compat.v1.train.exponential_decay instead.

W1207 11:39:57.836153 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:156: The name tf.train.exponential_decay is deprecated. Please use tf.compat.v1.train.exponential_decay instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:161: The name tf.train.AdamOptimizer is deprecated. Please use tf.compat.v1.train.AdamOptimizer instead.

W1207 11:39:57.843960 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:161: The name tf.train.AdamOptimizer is deprecated. Please use tf.compat.v1.train.AdamOptimizer instead.

INFO:tensorflow:Summary name Learning rate is illegal; using Learning_rate instead.
I1207 11:39:57.844195 281473169412464 summary_op_util.py:66] Summary name Learning rate is illegal; using Learning_rate instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:163: The name tf.get_collection is deprecated. Please use tf.compat.v1.get_collection instead.

W1207 11:39:57.846171 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:163: The name tf.get_collection is deprecated. Please use tf.compat.v1.get_collection instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:163: The name tf.GraphKeys is deprecated. Please use tf.compat.v1.GraphKeys instead.

W1207 11:39:57.846394 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:163: The name tf.GraphKeys is deprecated. Please use tf.compat.v1.GraphKeys instead.

INFO:tensorflow:Summary name Average max. coefficient val is illegal; using Average_max._coefficient_val instead.
I1207 11:40:05.523886 281473169412464 summary_op_util.py:66] Summary name Average max. coefficient val is illegal; using Average_max._coefficient_val instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:251: The name tf.summary.histogram is deprecated. Please use tf.compat.v1.summary.histogram instead.

W1207 11:40:05.549011 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:251: The name tf.summary.histogram is deprecated. Please use tf.compat.v1.summary.histogram instead.

INFO:tensorflow:Summary name Number of samples for explainability above 0.5 is illegal; using Number_of_samples_for_explainability_above_0.5 instead.
I1207 11:40:05.549226 281473169412464 summary_op_util.py:66] Summary name Number of samples for explainability above 0.5 is illegal; using Number_of_samples_for_explainability_above_0.5 instead.
INFO:tensorflow:Summary name Median number of samples for explainability above 0.5 is illegal; using Median_number_of_samples_for_explainability_above_0.5 instead.
I1207 11:40:05.594003 281473169412464 summary_op_util.py:66] Summary name Median number of samples for explainability above 0.5 is illegal; using Median_number_of_samples_for_explainability_above_0.5 instead.
INFO:tensorflow:Summary name Number of samples for explainability above 0.9 is illegal; using Number_of_samples_for_explainability_above_0.9 instead.
I1207 11:40:05.608237 281473169412464 summary_op_util.py:66] Summary name Number of samples for explainability above 0.9 is illegal; using Number_of_samples_for_explainability_above_0.9 instead.
INFO:tensorflow:Summary name Median number of samples for explainability above 0.9 is illegal; using Median_number_of_samples_for_explainability_above_0.9 instead.
I1207 11:40:05.652497 281473169412464 summary_op_util.py:66] Summary name Median number of samples for explainability above 0.9 is illegal; using Median_number_of_samples_for_explainability_above_0.9 instead.
INFO:tensorflow:Summary name Number of samples for explainability above 0.95 is illegal; using Number_of_samples_for_explainability_above_0.95 instead.
I1207 11:40:05.666634 281473169412464 summary_op_util.py:66] Summary name Number of samples for explainability above 0.95 is illegal; using Number_of_samples_for_explainability_above_0.95 instead.
INFO:tensorflow:Summary name Median number of samples for explainability above 0.95 is illegal; using Median_number_of_samples_for_explainability_above_0.95 instead.
I1207 11:40:05.710757 281473169412464 summary_op_util.py:66] Summary name Median number of samples for explainability above 0.95 is illegal; using Median_number_of_samples_for_explainability_above_0.95 instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:259: py_func (from tensorflow.python.ops.script_ops) is deprecated and will be removed in a future version.
Instructions for updating:
tf.py_func is deprecated in TF V2. Instead, there are two
    options available in V2.
    - tf.py_function takes a python function which manipulates tf eager
    tensors instead of numpy arrays. It's easy to convert a tf eager tensor to
    an ndarray (just call tensor.numpy()) but having access to eager tensors
    means `tf.py_function`s can use accelerators such as GPUs as well as
    being differentiable using a gradient tape.
    - tf.numpy_function maintains the semantics of the deprecated tf.py_func
    (it is not differentiable, and manipulates numpy arrays). It drops the
    stateful argument making all functions stateful.
    
W1207 11:40:05.712592 281473169412464 deprecation.py:323] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:259: py_func (from tensorflow.python.ops.script_ops) is deprecated and will be removed in a future version.
Instructions for updating:
tf.py_func is deprecated in TF V2. Instead, there are two
    options available in V2.
    - tf.py_function takes a python function which manipulates tf eager
    tensors instead of numpy arrays. It's easy to convert a tf eager tensor to
    an ndarray (just call tensor.numpy()) but having access to eager tensors
    means `tf.py_function`s can use accelerators such as GPUs as well as
    being differentiable using a gradient tape.
    - tf.numpy_function maintains the semantics of the deprecated tf.py_func
    (it is not differentiable, and manipulates numpy arrays). It drops the
    stateful argument making all functions stateful.
    
INFO:tensorflow:Summary name Maximum per-class explainability is illegal; using Maximum_per-class_explainability instead.
I1207 11:40:05.716202 281473169412464 summary_op_util.py:66] Summary name Maximum per-class explainability is illegal; using Maximum_per-class_explainability instead.
INFO:tensorflow:Summary name Val accuracy input query is illegal; using Val_accuracy_input_query instead.
I1207 11:40:05.735805 281473169412464 summary_op_util.py:66] Summary name Val accuracy input query is illegal; using Val_accuracy_input_query instead.
INFO:tensorflow:Summary name Val accuracy weighted prototypes is illegal; using Val_accuracy_weighted_prototypes instead.
I1207 11:40:05.744258 281473169412464 summary_op_util.py:66] Summary name Val accuracy weighted prototypes is illegal; using Val_accuracy_weighted_prototypes instead.
INFO:tensorflow:Summary name Val average confidence of wrong decisions is illegal; using Val_average_confidence_of_wrong_decisions instead.
I1207 11:40:05.753936 281473169412464 summary_op_util.py:66] Summary name Val average confidence of wrong decisions is illegal; using Val_average_confidence_of_wrong_decisions instead.
INFO:tensorflow:Summary name Val average confidence of right decisions is illegal; using Val_average_confidence_of_right_decisions instead.
I1207 11:40:05.761937 281473169412464 summary_op_util.py:66] Summary name Val average confidence of right decisions is illegal; using Val_average_confidence_of_right_decisions instead.
INFO:tensorflow:Summary name Val accurate ratio for confidence above 0.5 is illegal; using Val_accurate_ratio_for_confidence_above_0.5 instead.
I1207 11:40:05.779014 281473169412464 summary_op_util.py:66] Summary name Val accurate ratio for confidence above 0.5 is illegal; using Val_accurate_ratio_for_confidence_above_0.5 instead.
INFO:tensorflow:Summary name Val total ratio for confidence above 0.5 is illegal; using Val_total_ratio_for_confidence_above_0.5 instead.
I1207 11:40:05.782503 281473169412464 summary_op_util.py:66] Summary name Val total ratio for confidence above 0.5 is illegal; using Val_total_ratio_for_confidence_above_0.5 instead.
INFO:tensorflow:Summary name Val accurate ratio for confidence above 0.8 is illegal; using Val_accurate_ratio_for_confidence_above_0.8 instead.
I1207 11:40:05.798518 281473169412464 summary_op_util.py:66] Summary name Val accurate ratio for confidence above 0.8 is illegal; using Val_accurate_ratio_for_confidence_above_0.8 instead.
INFO:tensorflow:Summary name Val total ratio for confidence above 0.8 is illegal; using Val_total_ratio_for_confidence_above_0.8 instead.
I1207 11:40:05.802016 281473169412464 summary_op_util.py:66] Summary name Val total ratio for confidence above 0.8 is illegal; using Val_total_ratio_for_confidence_above_0.8 instead.
INFO:tensorflow:Summary name Val accurate ratio for confidence above 0.9 is illegal; using Val_accurate_ratio_for_confidence_above_0.9 instead.
I1207 11:40:05.818130 281473169412464 summary_op_util.py:66] Summary name Val accurate ratio for confidence above 0.9 is illegal; using Val_accurate_ratio_for_confidence_above_0.9 instead.
INFO:tensorflow:Summary name Val total ratio for confidence above 0.9 is illegal; using Val_total_ratio_for_confidence_above_0.9 instead.
I1207 11:40:05.821634 281473169412464 summary_op_util.py:66] Summary name Val total ratio for confidence above 0.9 is illegal; using Val_total_ratio_for_confidence_above_0.9 instead.
INFO:tensorflow:Summary name Val accurate ratio for confidence above 0.95 is illegal; using Val_accurate_ratio_for_confidence_above_0.95 instead.
I1207 11:40:05.837677 281473169412464 summary_op_util.py:66] Summary name Val accurate ratio for confidence above 0.95 is illegal; using Val_accurate_ratio_for_confidence_above_0.95 instead.
INFO:tensorflow:Summary name Val total ratio for confidence above 0.95 is illegal; using Val_total_ratio_for_confidence_above_0.95 instead.
I1207 11:40:05.841177 281473169412464 summary_op_util.py:66] Summary name Val total ratio for confidence above 0.95 is illegal; using Val_total_ratio_for_confidence_above_0.95 instead.
INFO:tensorflow:Summary name Val accurate ratio for confidence above 0.99 is illegal; using Val_accurate_ratio_for_confidence_above_0.99 instead.
I1207 11:40:05.857295 281473169412464 summary_op_util.py:66] Summary name Val accurate ratio for confidence above 0.99 is illegal; using Val_accurate_ratio_for_confidence_above_0.99 instead.
INFO:tensorflow:Summary name Val total ratio for confidence above 0.99 is illegal; using Val_total_ratio_for_confidence_above_0.99 instead.
I1207 11:40:05.860862 281473169412464 summary_op_util.py:66] Summary name Val total ratio for confidence above 0.99 is illegal; using Val_total_ratio_for_confidence_above_0.99 instead.
INFO:tensorflow:Summary name Val accurate ratio for confidence above 0.999 is illegal; using Val_accurate_ratio_for_confidence_above_0.999 instead.
I1207 11:40:05.876928 281473169412464 summary_op_util.py:66] Summary name Val accurate ratio for confidence above 0.999 is illegal; using Val_accurate_ratio_for_confidence_above_0.999 instead.
INFO:tensorflow:Summary name Val total ratio for confidence above 0.999 is illegal; using Val_total_ratio_for_confidence_above_0.999 instead.
I1207 11:40:05.880399 281473169412464 summary_op_util.py:66] Summary name Val total ratio for confidence above 0.999 is illegal; using Val_total_ratio_for_confidence_above_0.999 instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:299: The name tf.summary.image is deprecated. Please use tf.compat.v1.summary.image instead.

W1207 11:40:05.882249 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:299: The name tf.summary.image is deprecated. Please use tf.compat.v1.summary.image instead.

INFO:tensorflow:Summary name Input image 0 is illegal; using Input_image_0 instead.
I1207 11:40:05.888710 281473169412464 summary_op_util.py:66] Summary name Input image 0 is illegal; using Input_image_0 instead.
INFO:tensorflow:Summary name Prototype images for image 0 is illegal; using Prototype_images_for_image_0 instead.
I1207 11:40:05.963248 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 0 is illegal; using Prototype_images_for_image_0 instead.
INFO:tensorflow:Summary name Input image 1 is illegal; using Input_image_1 instead.
I1207 11:40:05.971956 281473169412464 summary_op_util.py:66] Summary name Input image 1 is illegal; using Input_image_1 instead.
INFO:tensorflow:Summary name Prototype images for image 1 is illegal; using Prototype_images_for_image_1 instead.
I1207 11:40:06.045674 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 1 is illegal; using Prototype_images_for_image_1 instead.
INFO:tensorflow:Summary name Input image 2 is illegal; using Input_image_2 instead.
I1207 11:40:06.054394 281473169412464 summary_op_util.py:66] Summary name Input image 2 is illegal; using Input_image_2 instead.
INFO:tensorflow:Summary name Prototype images for image 2 is illegal; using Prototype_images_for_image_2 instead.
I1207 11:40:06.127909 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 2 is illegal; using Prototype_images_for_image_2 instead.
INFO:tensorflow:Summary name Input image 3 is illegal; using Input_image_3 instead.
I1207 11:40:06.136714 281473169412464 summary_op_util.py:66] Summary name Input image 3 is illegal; using Input_image_3 instead.
INFO:tensorflow:Summary name Prototype images for image 3 is illegal; using Prototype_images_for_image_3 instead.
I1207 11:40:06.210273 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 3 is illegal; using Prototype_images_for_image_3 instead.
INFO:tensorflow:Summary name Input image 4 is illegal; using Input_image_4 instead.
I1207 11:40:06.219003 281473169412464 summary_op_util.py:66] Summary name Input image 4 is illegal; using Input_image_4 instead.
INFO:tensorflow:Summary name Prototype images for image 4 is illegal; using Prototype_images_for_image_4 instead.
I1207 11:40:06.292705 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 4 is illegal; using Prototype_images_for_image_4 instead.
INFO:tensorflow:Summary name Input image 5 is illegal; using Input_image_5 instead.
I1207 11:40:06.301432 281473169412464 summary_op_util.py:66] Summary name Input image 5 is illegal; using Input_image_5 instead.
INFO:tensorflow:Summary name Prototype images for image 5 is illegal; using Prototype_images_for_image_5 instead.
I1207 11:40:06.375952 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 5 is illegal; using Prototype_images_for_image_5 instead.
INFO:tensorflow:Summary name Input image 6 is illegal; using Input_image_6 instead.
I1207 11:40:06.384625 281473169412464 summary_op_util.py:66] Summary name Input image 6 is illegal; using Input_image_6 instead.
INFO:tensorflow:Summary name Prototype images for image 6 is illegal; using Prototype_images_for_image_6 instead.
I1207 11:40:06.458138 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 6 is illegal; using Prototype_images_for_image_6 instead.
INFO:tensorflow:Summary name Input image 7 is illegal; using Input_image_7 instead.
I1207 11:40:06.466849 281473169412464 summary_op_util.py:66] Summary name Input image 7 is illegal; using Input_image_7 instead.
INFO:tensorflow:Summary name Prototype images for image 7 is illegal; using Prototype_images_for_image_7 instead.
I1207 11:40:06.540399 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 7 is illegal; using Prototype_images_for_image_7 instead.
INFO:tensorflow:Summary name Input image 8 is illegal; using Input_image_8 instead.
I1207 11:40:06.549115 281473169412464 summary_op_util.py:66] Summary name Input image 8 is illegal; using Input_image_8 instead.
INFO:tensorflow:Summary name Prototype images for image 8 is illegal; using Prototype_images_for_image_8 instead.
I1207 11:40:06.624626 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 8 is illegal; using Prototype_images_for_image_8 instead.
INFO:tensorflow:Summary name Input image 9 is illegal; using Input_image_9 instead.
I1207 11:40:06.638599 281473169412464 summary_op_util.py:66] Summary name Input image 9 is illegal; using Input_image_9 instead.
INFO:tensorflow:Summary name Prototype images for image 9 is illegal; using Prototype_images_for_image_9 instead.
I1207 11:40:06.714935 281473169412464 summary_op_util.py:66] Summary name Prototype images for image 9 is illegal; using Prototype_images_for_image_9 instead.
WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:314: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.

W1207 11:40:06.717606 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:314: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:314: The name tf.local_variables_initializer is deprecated. Please use tf.compat.v1.local_variables_initializer instead.

W1207 11:40:06.723292 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:314: The name tf.local_variables_initializer is deprecated. Please use tf.compat.v1.local_variables_initializer instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:315: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

W1207 11:40:06.723986 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:315: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:316: The name tf.summary.merge_all is deprecated. Please use tf.compat.v1.summary.merge_all instead.

W1207 11:40:07.307770 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:316: The name tf.summary.merge_all is deprecated. Please use tf.compat.v1.summary.merge_all instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:319: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.

W1207 11:40:07.310437 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:319: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:331: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

W1207 11:40:07.310870 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:331: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

WARNING:tensorflow:From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:333: The name tf.summary.FileWriter is deprecated. Please use tf.compat.v1.summary.FileWriter instead.

W1207 11:40:07.350907 281473169412464 module_wrapper.py:139] From /home/ma-user/modelarts/user-job-dir/code/main_protoattend.py:333: The name tf.summary.FileWriter is deprecated. Please use tf.compat.v1.summary.FileWriter instead.

Traceback (most recent call last):
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 1365, in _do_call
    return fn(*args)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 1350, in _run_fn
    target_list, run_metadata)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 1443, in _call_tf_sessionrun
    run_metadata)
tensorflow.python.framework.errors_impl.InternalError: graph parse failed. ret : 4294967295
Error Message is : 
E19014: Value [input number of tensorflow[1]] for Op [clip_by_value_105/Minimum] is invalid. Reason: should be equal to factory size[2].

	 [[{{node GeOp19_0}}]]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ma-user/modelarts/user-job-dir/code/main_protoattend.py", line 359, in <module>
    tf.app.run()
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/absl/app.py", line 312, in run
    _run_main(main, args)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/absl/app.py", line 258, in _run_main
    sys.exit(main(argv))
  File "/home/ma-user/modelarts/user-job-dir/code/main_protoattend.py", line 347, in main
    sess.run(train_op)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 956, in run
    run_metadata_ptr)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 1180, in _run
    feed_dict_tensor, options, run_metadata)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 1359, in _do_run
    run_metadata)
  File "/home/ma-user/anaconda/lib/python3.7/site-packages/tensorflow_core/python/client/session.py", line 1384, in _do_call
    raise type(e)(node_def, op, message)
tensorflow.python.framework.errors_impl.InternalError: graph parse failed. ret : 4294967295
Error Message is : 
E19014: Value [input number of tensorflow[1]] for Op [clip_by_value_105/Minimum] is invalid. Reason: should be equal to factory size[2].

	 [[{{node GeOp19_0}}]]
[ModelArts Service Log]2021-12-07 11:41:07,829 - INFO - Begin destroy training processes
[ModelArts Service Log]2021-12-07 11:41:07,829 - INFO - proc-rank-0-device-0 (pid: 98) has exited
[ModelArts Service Log]2021-12-07 11:41:07,829 - INFO - End destroy training processes
[ModelArts Service Log]exiting...
[ModelArts Service Log]exit with 0
[ModelArts Service Log][sidecar] training is completed
[ModelArts Service Log][sidecar] stop outputs_handler_pid = 61 by signal SIGTERM
[ModelArts Service Log][INFO][2021/12/07 11:41:08,901]: output-handler finalizing due to: [training finished]
[ModelArts Service Log][INFO][2021/12/07 11:41:08,901]: output-handler finalized
[ModelArts Service Log][sidecar] stop toolkit_obs_sync_by_channels_pid = 76 by signal SIGTERM
time="2021-12-07T11:41:08+08:00" level=info msg="the periodic upload task exiting..." file="upload.go:59" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=log_url Platform=ModelArts-Service
time="2021-12-07T11:41:08+08:00" level=info msg="the periodic upload task exiting..." file="upload.go:59" Command=obs/sync_by_channels Component=ma-training-toolkit Ctx=train_url Platform=ModelArts-Service
